# ๐ฏ ุงูุณูุงู ุงููุดุท (Active Context)
*ุขุฎุฑ ุชุญุฏูุซ: 13 ููุงูุฑ 2026*
**ุงูุชุญุฏูุซุงุช ุงูุฃุฎูุฑุฉ:**
- ุชู ุฅุตูุงุญ ูุดุงูู ูุงุฌูุฉ ุงููุณุชุฎุฏู: ุนุฑุถ ูุฑูุช "High Risk Ingredients"ุ ูุทุงุจูุงุช ุชูุงุนูุงุช ุงูุทุนุงู (Food Mismatch)ุ ูุฃููููุงุช ุงูุชุญุฐูุฑ (Disease Icons).
- ุชู ุชุญุฏูุซ ุฅุตุฏุงุฑ ุงูุชุทุจูู ุฅูู **3.6.1**.

## ๐ ุงูุญุงูุฉ ุงูุญุงููุฉ (Current Status)
ุงููุดุฑูุน ุงูุขู ูู ุญุงูุฉ **ุงููุนูุงุฑูุฉ ุงููุฌููุฉ ุงููุชูุฏูุฉ** (Hybrid Architecture). ุชู ุงูุงูุชูุงู ูู ูููุฐุฌ "ุชุฎุฒูู ูู ุดูุก ูุญููุงู" ุฅูู ูููุฐุฌ "ุงูุฌูุจ ุนูุฏ ุงูุทูุจ ูุงูุชุฎุฒูู ุงููุคูุช ุงูุฐูู" (Fetch-on-Demand & Smart Caching). ูุฐุง ุงูุชุญูู ุญู ูุดููุฉ ูุณุงุญุฉ ุงูุชุฎุฒูู ูู Cloudflare D1 ูููู ุญุฌู ุงูุชุทุจูู ุจูุณุจุฉ 80%.

### โ ุชู ุฅูุฌุงุฒู ูุคุฎุฑุงู
1.  **ุชูุณูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (D1 Split Strategy)**:
    -   ุฅูุดุงุก ูุงุนุฏุฉ ุจูุงูุงุช ูุณุชููุฉ `mediswitch-interactions` ูุฎุตุตุฉ ููุชูุงุนูุงุช ุงูุถุฎูุฉ (320,000+ ุณุฌู).
    -   ุชุญุฑูุฑ ูุณุงุญุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ `mediswitsh-db` ุจุญุฐู ุฌุฏุงูู ุงูุชูุงุนูุงุช ูููุงุ ููุง ุญู ูุดููุฉ "Code 7500: Exceeded maximum DB size".
    -   ุชุญุฏูุซ ุงูู Worker (v3.5) ููุชุนุฑู ุนูู ุงููุงุนุฏุชูู ูููุฌู ุงูุงุณุชุนูุงูุงุช ุขููุงู.

2.  **ุชุญุตูู ุญุฌู ุงูุชุทุจูู (App Size Optimization)**:
    -   ุญุฐู ุฃูุซุฑ ูู 200 ููุฌุงุจุงูุช ูู ูููุงุช ุงูู JSON (ุชูุงุนูุงุช ุงูุฃุฏููุฉุ ุงูุฃูุฑุงุถุ ุงูุบุฐุงุก) ูู ูุฌูุฏ `assets`.
    -   ุฃุตุจุญ ุญุฌู ุงูุชุทุจูู ุงูุขู ุญูุงูู **40 ููุฌุงุจุงูุช** ุจุฏู 250 ููุฌุงุจุงูุช.

3.  **ุฅุตูุงุญ ูุฒุงููุฉ D1 ูุชุญุณูู ูุงุฌูุฉ ุงูุฌุฑุนุงุช (Jan 2026)**:
    -   ุฅุตูุงุญ ุฃุฎุทุงุก `UNIQUE constraint` ู `SQLITE_TOOBIG` ูู Cloudflare D1.
    -   ุชุญููู ูุงุฌูุฉ ุงูุฌุฑุนุงุช (Dosage Tab) ูุชููู ุฃูุซุฑ ุชูุตููุงู ุจูุฑูุช ูุณุชููุฉ ูู (Route, Category, Dose, Frequency).
    -   ุฅุฒุงูุฉ ุงูุชูุฑุงุฑ ูู ุนุฑุถ ุงูุชุนูููุงุช ุงูุทุจูุฉ.

3.  **ุงููุนูุงุฑูุฉ ุงููุฌููุฉ (Hybrid Data Flow)**:
    -   ุฅุถุงูุฉ `InteractionRemoteDataSource` ูุฌูุจ ุงูุจูุงูุงุช ูู ุงูู API ุนูุฏ ุงูุญุงุฌุฉ.
    -   ุชุญุฏูุซ `InteractionRepositoryImpl` ููุนูู ุจูุธุงู "Cache-First": ุงูุจุญุซ ูุญููุงู ุฃููุงูุ ุซู ุงูุฌูุจ ูู ุงูู API ูุญูุธ ุงููุชูุฌุฉ ูู SQLite.
    -   ุฅุถุงูุฉ ูุธุงุฆู `saveToCache` ูู `SqliteLocalDataSource` ูุถูุงู ุนูู ุงูุชุทุจูู ุฃูููุงูู ููุชูุงุนูุงุช ุงูุชู ุชู ุฌูุจูุง ูุณุจูุงู.

## ๐ญ ุงูุชุฑููุฒ ุงูุญุงูู (Current Focus)
1.  **ุงููุญุต ุงูููุงุฆู (Final Verification)**: ุงูุชุฃูุฏ ูู ุณูุงุณุฉ ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู ุนูุฏ ุฌูุจ ุงูุชูุงุนูุงุช ูุฃูู ูุฑุฉ (Network Latency check).
2.  **ุงูุชูุซูู (Documentation)**: ุชุญุฏูุซ Memory Bank ููุนูุณ ุงูุชุบููุฑุงุช ุงูุฌุฐุฑูุฉ ูู ูุณุงุฑ ุงูุจูุงูุงุช.

## ๐ก ุงููุฑุงุฑุงุช ุงููุดุทุฉ (Active Decisions)
-   **ูููุฐุฌ ุงููุฌูู ุงูุฐูู**: ุงูุชูุงุนูุงุช ุชูุฌูุจ ุนูุฏ ุงูุทูุจ ููุท ูุชูููู ุงุณุชููุงู ุงูุจูุงูุงุช ูุงููุณุงุญุฉุ ูุน ุงูุงุญุชูุงุธ ุจุจูุงูุงุช ุงูุฃุฏููุฉ ูุงูุฌุฑุนุงุช ูุญููุงู ูุณุฑุนุฉ ุงูุจุญุซ.
-   **ูุตู ุงูุชูุงุนูุงุช**: ุฃู ุจูุงูุงุช ุถุฎูุฉ ูุณุชูุจููุฉ (ูุซู ุชูุงุนูุงุช ุงูุฃุนุดุงุจ ุฃู ุฌููุงุช ุงูุฃุฏููุฉ) ุณุชูุถุน ูู ูุงุนุฏุฉ ุจูุงูุงุช `INTERACTIONS_DB`.

## ๐ง ุงูุชุญุฏูุงุช ูุงููุฎุงุทุฑ ุงููุชุจููุฉ
-   **ุงูุงุนุชูุงุฏ ุนูู ุงูุฅูุชุฑูุช**: ูุฃูู ูุฑุฉุ ูุญุชุงุฌ ุงููุณุชุฎุฏู ูุฅูุชุฑูุช (ููุฑุฉ ูุงุญุฏุฉ) ูุนุฑุถ ุชูุงุนูุงุช ูุนููุฉ ูู ูุณุจู ุฌูุจูุง. ูุฌุจ ุชูููุฑ UI Indicator ููุถุญ ุนูููุฉ ุงูุชุญููู.
-   **ูุฒุงููุฉ ุงูุชูุงุนูุงุช**: ุฃู ุชุญุฏูุซุงุช ุฌุฏูุฏุฉ ููุชูุงุนูุงุช ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ ูุฌุจ ุฃู ุชุชูุฌู ูููุงุนุฏุฉ ุงูุฌุฏูุฏุฉ `mediswitch-interactions`.
