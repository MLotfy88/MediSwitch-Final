# ๐ ุฑูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฅูู Cloudflare D1

## ุงูุฎุทูุงุช ุงููุทููุจุฉ

### 1๏ธโฃ ุฅุถุงูุฉ Secrets ูู GitHub

ุงูุชูู ุฅูู:
```
Repository Settings โ Secrets and variables โ Actions โ New repository secret
```

ุฃุถู ูุฐูู ุงูุณุฑ:

| ุงุณู ุงูุณุฑ | ุงููููุฉ |
|---------|--------|
| `CLOUDFLARE_API_TOKEN` | `yy-vk8KC4yth3Cn2lpva1AgrP2kGMJrQQrGIUM1-` |
| `CLOUDFLARE_EMAIL` | `eedf653449abdca28e865ddf3511dd4c62ed2` |

### 2๏ธโฃ ุชุดุบูู ุงูู Workflow

1. ุงุฐูุจ ุฅูู ุชุจููุจ **Actions** ูู ุงูุฑูุจู
2. ุงุฎุชุฑ workflow: **Upload Database to Cloudflare D1**
3. ุงุถุบุท **Run workflow**
4. ุงุฎุชุฑ:
   - Branch: `main` (ุฃู ุงููุฑุน ุงูุญุงูู)
   - Start from file: `70` (ููุงุณุชูุฑุงุฑ ูู ุญูุซ ุชููููุง)
5. ุงุถุบุท **Run workflow** ุงูุฃุฎุถุฑ

### 3๏ธโฃ ูุชุงุจุนุฉ ุงูุชูุฏู

- ุงูู Workflow ุณูุณุชูุฑ ุญุชู 8 ุณุงุนุงุช
- ููููู ูุชุงุจุนุฉ ุงูุชูุฏู ูู ุงูููุช ุงููุนูู
- ุณูุชู ุญูุธ `upload_progress.txt` ูู artifact

### ๐ ุงูุงุณุชุฑุงุชูุฌูุฉ ุงููุณุชุฎุฏูุฉ

| ุงูุฌุฏูู | ุงูุตููู ููู INSERT | ุงูุณุจุจ |
|--------|------------------|-------|
| `drugs` | 25 | ุจูุงูุงุช ูุชูุณุทุฉ |
| `dosage_guidelines` | 1 | ุจูุงูุงุช ูุถุบูุทุฉ ูุจูุฑุฉ (BLOB) |
| `drug_interactions` | 10 | ุจูุงูุงุช ูุชูุณุทุฉ ุฅูู ูุจูุฑุฉ |
| `disease_interactions` | 15 | ุจูุงูุงุช ูุชูุณุทุฉ |
| `food_interactions` | 20 | ุจูุงูุงุช ุตุบูุฑุฉ |
| `med_ingredients` | 50 | ุฌุฏูู ุตุบูุฑ ุฌุฏุงู |

### โฑ๏ธ ุงูููุช ุงููุชููุน

- **ุฅุฌูุงูู ุงููููุงุช**: ~1900 ููู
- **ุชู ุงูุฑูุน ูุญููุงู**: 70 ููู
- **ุงููุชุจูู**: ~1830 ููู
- **ุงูููุช ุงููุชููุน**: 2-3 ุณุงุนุงุช

### ๐ ุงูุงุณุชุฆูุงู ุงูุชููุงุฆู

ุฅุฐุง ูุดู ุงูู Workflow:
1. ุญููู `upload_progress.txt` ูู ุงูู Artifacts
2. ุถุนู ูู ุฌุฐุฑ ุงููุดุฑูุน
3. ุฃุนุฏ ุชุดุบูู ุงูู Workflow
4. ุณูุชุฎุทู ุงููููุงุช ุงูููุชููุฉ ุชููุงุฆูุงู

### โ ุงูุชุญูู ุจุนุฏ ุงูุงูุชูุงุก

```bash
npx wrangler d1 execute mediswitsh-db --command="SELECT COUNT(*) FROM drugs" --remote
npx wrangler d1 execute mediswitsh-db --command="SELECT COUNT(*) FROM dosage_guidelines" --remote
```

## ๐ ุงููููุงุช ุงููููุฉ

- `.github/workflows/upload-d1.yml` - GitHub Workflow
- `scripts/split_db_mixed.py` - ุณูุฑูุจุช ุงูุชูุณูู ุจุงูุงุณุชุฑุงุชูุฌูุฉ ุงููุฎุชูุทุฉ
- `scripts/upload_sql_chunks.py` - ุณูุฑูุจุช ุงูุฑูุน ูุน ุงูุงุณุชุฆูุงู
- `upload_progress.txt` - ุชุชุจุน ุงูุชูุฏู (ูููุดุฃ ุชููุงุฆูุงู)

## ๐ ุญู ุงููุดุงูู

### ุฅุฐุง ุธูุฑ ุฎุทุฃ SQLITE_TOOBIG
โ ุงูุญู: ูุฏูุฌ ูู ุงูุงุณุชุฑุงุชูุฌูุฉ ุงููุฎุชูุทุฉ (ุตู ูุงุญุฏ ูู dosage_guidelines)

### ุฅุฐุง ุชููู ุงูู Workflow
โ ุจุจุณุงุทุฉ ุฃุนุฏ ุชุดุบูููุ ุณูุณุชุฃูู ูู ุขุฎุฑ ููู

### ุฅุฐุง ููุช ุชุฑูุฏ ุงูุจุฏุก ูู ุงูุตูุฑ
โ ุงุญุฐู `upload_progress.txt` ูุงุถุจุท "Start from file" ุนูู `0`
