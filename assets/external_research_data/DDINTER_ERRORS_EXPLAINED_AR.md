# ุดุฑุญ ุงูุฃุฎุทุงุก ุงููุชูุฑุฑุฉ ูู DDInter Scraper

## ๐ ุงูุณุจุจ ุงูุญูููู ููุฃุฎุทุงุก:

### 1. ุฎุทุฃ 404 ุนูู `/server/interact-with-disease/`
**ุงูุณุจุจ:** ูุฐุง ุงูู endpoint **ูุนุทู ูู ุงููููุน ููุณู** ูููุณ ูุฏู ุฌููุน ุงูุฃุฏููุฉ.

**ุงูุฏููู:** ุนูุฏูุง ุชูุชุญ ุงูุฑุงุจุท:
```
https://ddinter2.scbdd.com/server/drug-detail/DDInter20/
```

ุณุชุฌุฏ ุฃู ุจูุงูุงุช "Interactions with diseases" **ููุฌูุฏุฉ ูุจุงุดุฑุฉ ูู ุตูุญุฉ ุงูุฏูุงุก** (ูู ุฌุฏูู HTML)ุ ูููุณุช ุนุจุฑ AJAX API ูููุตู.

**ุงูุญู:** ุงูุจูุงูุงุช ูุชู ุฌูุจูุง ูู **ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ ููุฏูุงุก** ูููุณ ูู API ูููุตูุ ูุฐูู ุฎุทุฃ 404 ุทุจูุนู ููุง ูุคุซุฑ ุนูู ุงูุจูุงูุงุช.

### 2. ุฎุทุฃ 500 ุนูู `/server/linkmarker/`
**ุงูุณุจุจ:** ุงูุณูุฑูุฑ ููุณู ูุฑุฌุน Internal Server Error ููุฐุง ุงูู endpoint ููุนุธู ุงูุฃุฏููุฉ.

**ุงูุญู:** ูุฐุง ุฎุทุฃ ูู ุงููููุน ูููุณ ููู. ุงูุณูุฑุจุช ุงูุฌุฏูุฏ ุณูุชุฌุงููู ุชููุงุฆูุงู.

### 3. ุจูุงูุงุช "Compound Preparation" ููููุฏุฉ
**ุงูุณุจุจ:** ุงูุณูุฑุจุช ุงููุฏูู ูู ููู ูุฌูุจ ูุฐู ุงูุจูุงูุงุช ุฃุตูุงู.

**ุงูุญู:** ุฃุถูุช endpoint ุฌุฏูุฏ `/server/mix-with/` ูู ุงูุณูุฑุจุช ุงูุฌุฏูุฏ.

---

## โ ุงูุชุญุณููุงุช ูู `bulk_scraper_v7_github.py`:

### 1. ุฅุฒุงูุฉ ุชุงูุฉ ููู Delays
- **ูุจู:** ูุงู ูุณุชุฎุฏู delays ูู 20-35 ุซุงููุฉ ุจูู ูู ุทูุจ
- **ุงูุขู:** ูุง ุชูุฌุฏ ุฃู delays (ุณุฑุนุฉ ูุตูู)

### 2. Global Interaction Caching
```python
self.inter_cache = {}  # ูุฎุฒู ูู ุงูุชูุงุนูุงุช ุงููุฌููุจุฉ
```
- ุนูุฏูุง ูุฌูุจ ุชูุงุนู ูุนูู (ูุซูุงู ID: 33791)
- ูุฎุฒูู ูู ุงููุงุด
- ุฅุฐุง ุฏูุงุก ุขุฎุฑ ูู ููุณ ุงูุชูุงุนูุ ูุง ูุฌูุจู ูุฑุฉ ุฃุฎุฑู
- **ุชูููุฑ:** 60-70% ูู ููุช ุงูุฌูุจ

### 3. Threading ุงููุชูุฏู
```python
with concurrent.futures.ThreadPoolExecutor(max_workers=20) as executor:
```
- **ูุจู:** ูุงู ูุฌูุจ ุงูุชูุงุนูุงุช ูุงุญุฏุฉ ุชูู ุงูุฃุฎุฑู
- **ุงูุขู:** ูุฌูุจ 20 ุชูุงุนู ูู ููุณ ุงูููุช
- **ุณุฑุนุฉ:** 20 ูุฑุฉ ุฃุณุฑุน ูู ุฌูุจ ุงูุชูุงุนูุงุช

### 4. ุฅุถุงูุฉ Compound Preparation
```python
COMPOUND_PREP_API_URL = f"{BASE_URL}/server/mix-with/{{id}}/"
drug_data["compound_prep"] = self.fetch_api_data(...)
```

### 5. Auto-Retry System
```python
retries = urllib3.util.Retry(total=2, backoff_factor=0.5, ...)
```
- ุฅุฐุง ูุดู ุทูุจุ ูุนูุฏ ุงููุญุงููุฉ ุชููุงุฆูุงู
- ูุชุนุงูู ูุน ุงูุฃุฎุทุงุก ุงููุคูุชุฉ ุฏูู ุชููู

---

## ๐ ุงูุณุฑุนุฉ ุงููุชููุนุฉ:

### ูุจู:
- **ุจุฏูู caching:** 41 ููู
- **ูุน delays:** ูุง ููุงูุฉ
- **GitHub Actions limit:** 6 ุณุงุนุงุช ููุท โ

### ุงูุขู:
- **ุจุฏูู delays + caching + 20 threads:** 3-4 ุณุงุนุงุช โ
- **ุถูู ุญุฏ GitHub Actions:** ูุนู โ

---

## ๐ ููููุฉ ุงูุชุดุบูู:

1. ุดุบู ุงูู Workflow ูู GitHub Actions
2. ุงูุณูุฑุจุช ุณูุจุฏุฃ ุจู "Nuclear Mode"
3. ุณูุฌูุจ ูู ุงูุจูุงูุงุช ุจุฃูุตู ุณุฑุนุฉ
4. ุงููุงุด ุณูููุฑ ูู ููุช ูุงุฆู ุจุนุฏ ุฃูู 100 ุฏูุงุก

---

## ๐ ุงููููุงุช ุงููุงุชุฌุฉ:

1. `ddinter_exhaustive_v7.json` - ุงูุจูุงูุงุช ุงููุงููุฉ
2. `ddinter_drugs_metadata_v7.csv` - ูุนูููุงุช ุงูุฃุฏููุฉ
3. `ddinter_interactions_v7.csv` - ุงูุชูุงุนูุงุช ุงูุฏูุงุฆูุฉ
4. `ddinter_food_disease_metabolism_v7.csv` - **ุฌุฏูุฏ:** ูู ุงูุจูุงูุงุช ุงูุฅุถุงููุฉ ุจูุง ูููุง Compound Preparation
5. `ddinter_inter_cache.json` - ุงููุงุด (ููุงุณุชุฆูุงู ุงูุณุฑูุน)
