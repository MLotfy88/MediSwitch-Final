// android/settings.gradle (الكود المعدل)

pluginManagement {
    // تم حذف الكود الخاص بقراءة local.properties و flutter.sdk لأنه غير موثوق في CI
    // تم حذف includeBuild(...) الذي كان يعتمد عليه

    repositories {
        google()
        mavenCentral()
        gradlePluginPortal() // مستودع لإضافات Gradle نفسها
    }
}

plugins {
    // إضافة Flutter لتحميل الإضافات تلقائيًا
    id 'dev.flutter.flutter-plugin-loader' version '1.0.0'
    // تعريف إصدارات الإضافات الرئيسية ليتم تطبيقها لاحقًا في ملفات build.gradle
    // تأكد من أن هذه الإصدارات متوافقة مع إصدار Gradle لديك (8.10.2)
    id 'com.android.application' version '8.1.0' apply false
    id 'org.jetbrains.kotlin.android' version '1.8.22' apply false // تأكد من توافق إصدار Kotlin
}

dependencyResolutionManagement {
    // *** تم التغيير هنا للسماح لإضافة Flutter بإضافة مستودعاتها ***
    repositoriesMode.set(RepositoriesMode.PREFER_SETTINGS)
    repositories {
        google()    // مستودع Google لمكتبات Android و Firebase وغيرها
        mavenCentral() // المستودع المركزي للمكتبات
        // تم حذف مسار .pub-cache لأنه غير قياسي وغير ضروري غالبًا
    }
}

// تضمين وحدة التطبيق الرئيسية
include ':app'

// تم حذف الكود اليدوي لقراءة .flutter-plugins و .flutter-plugins-dependencies
// لأن الإضافة 'dev.flutter.flutter-plugin-loader' يجب أن تتعامل مع هذا تلقائيًا.
