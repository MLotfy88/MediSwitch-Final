// android/app/build.gradle (الكود الكامل والمراجع)

// *** الكتلة الأولى: plugins ***
// تأكد من عدم وجود أي شيء قبلها ومن إغلاقها بشكل صحيح
plugins {
    id 'com.android.application'
    id 'kotlin-android'
    // تطبيق إضافة Flutter في النهاية داخل هذه الكتلة
    id 'dev.flutter.flutter-gradle-plugin'
} // <-- تأكد من وجود هذا القوس المغلق

// *** الكتلة الثانية: android ***
// يجب أن تبدأ *بعد* إغلاق كتلة plugins
android {
    // استخدم اقتباسات مزدوجة أو مفردة باستمرار
    namespace "com.example.mediswitch"
    compileSdk 35

    signingConfigs {
         debug {
             // لا بأس بترك هذا هنا، لكنه لن يُستخدم لبناء release بدون signingConfig
             storeFile file("${System.getProperty('user.home')}/.android/debug.keystore")
             storePassword "android"
             keyAlias "androiddebugkey"
             keyPassword "android"
         }
         // يمكنك إضافة إعداد release هنا لاحقًا للتوقيع الحقيقي
         // release { ... }
     }

    defaultConfig {
        // يمكنك ترك هذا كما هو، إضافة Flutter ستعين القيم الصحيحة
        applicationId "com.example.mediswitch"
        minSdk 28
        targetSdk 35
        versionCode 1 // قيمة افتراضية يمكن لـ Flutter تجاوزها
        versionName "1.0" // قيمة افتراضية يمكن لـ Flutter تجاوزها
    }

    buildTypes {
        release {
            // لا يوجد signingConfig هنا لبناء غير موقع
            minifyEnabled false // قم بتغيير هذا إلى true إذا كنت تريد تقليص الكود
            shrinkResources false // قم بتغيير هذا إلى true إذا كنت تريد تقليص الموارد (يتطلب minifyEnabled=true)
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
        debug {
            // يمكنك ترك إعدادات debug كما هي
             signingConfig signingConfigs.debug
        }
    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }

    kotlinOptions {
        jvmTarget = '17'
    }

    // التأكد من عدم وجود كود غريب أو بلوكات إضافية هنا
} // <-- تأكد من إغلاق بلوك android بشكل صحيح

// *** الكتلة الثالثة: dependencies ***
dependencies {
    // إضافة مكتبة Kotlin القياسية
    implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk8"
    // إضافة تبعيات أخرى هنا
    implementation 'com.google.android.play:core:1.10.3' // مثال
    // تأكد من أن كل implementation داخل هذه الكتلة
} // <-- تأكد من إغلاق بلوك dependencies بشكل صحيح

// *** الكتلة الرابعة: flutter ***
flutter {
    source '../..'
} // <-- تأكد من إغلاق بلوك flutter بشكل صحيح

// *** لا يجب أن يكون هناك أي كود إضافي بعد هذا ***
