# ๐๏ธ ุฃุฏูุงุช ูุญุต ูุงุนุฏุฉ ุงูุจูุงูุงุช - MediSwitch Database Tools

ูุฌููุนุฉ ูู ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ ููุญุต ูุชุฏููู ูุงุนุฏุฉ ุจูุงูุงุช MediSwitch ูุจู ุงููุฒุงููุฉ ูุน Cloudflare D1.

## ๐ ุงูุฃุฏูุงุช ุงููุชููุฑุฉ

### 1. `audit_database.py` - ุงููุญุต ุงูุณุฑูุน
**ุงููุธููุฉ:** ูุญุต ุณุฑูุน ูุฌูุฏุฉ ุงูุจูุงูุงุช ููุณุจ ุงูููุก ุงูุนุงูุฉ

**ุงูุงุณุชุฎุฏุงู:**
```bash
python3 tools/audit_database.py [db_path]
```

**ุงูุงูุชุฑุงุถู:** `mediswitch.db`

**ุงููุฎุฑุฌุงุช:**
- ุนุฏุฏ ุงูุณุฌูุงุช ูู ูู ุฌุฏูู
- ูุณุจุฉ ุงูููุก ููุญููู ุงููููุฉ
- ุชูููู ุนุงู (โ ุฌุงูุฒ / โ๏ธ ูุดุงูู)

**ูุซุงู:**
```bash
python3 tools/audit_database.py
```

---

### 2. `detailed_statistics.py` - ุงูุฅุญุตุงุฆูุงุช ุงูุชูุตูููุฉ
**ุงููุธููุฉ:** ุชูุฑูุฑ ุฅุญุตุงุฆู ุดุงูู ููู ุนููุฏ ูู ูู ุฌุฏูู

**ุงูุงุณุชุฎุฏุงู:**
```bash
python3 tools/detailed_statistics.py [db_path]
```

**ุงููุฎุฑุฌุงุช:**
- ุนุฏุฏ ุงูุญููู ุงูููุชูุฆุฉ/ุงููุงุฑุบุฉ ููู ุนููุฏ
- ูุณุจุฉ ูุฆููุฉ ููู ุนููุฏ
- ุชูููู (โ ููุชุงุฒ / โ๏ธ ุฌูุฏ / โ ุถุนูู)
- ุฎูุงุตุฉ ููุงุฆูุฉ ููู ุฌุฏูู

**ูุซุงู:**
```bash
python3 tools/detailed_statistics.py > stats_report.txt
```

---

### 3. `inspect_data_content.py` - ูุญุต ุงููุญุชูู
**ุงููุธููุฉ:** ุนุฑุถ ุนููุงุช ูุนููุฉ ูู ุงูุจูุงูุงุช ููุชุญูู ูู ุงูุฌูุฏุฉ

**ุงูุงุณุชุฎุฏุงู:**
```bash
python3 tools/inspect_data_content.py
```

**ุงููุฎุฑุฌุงุช:**
- 3 ุนููุงุช ูู ูู ุฌุฏูู
- ุนุฑุถ ุงููุญุชูู ุงููุนูู ููุญููู
- ูุญุต ุชูุตููู ูุตู ูุงูู

**ูุซุงู:**
```bash
python3 tools/inspect_data_content.py
```

---

## ๐ ุณูุฑ ุงูุนูู ุงูููุตู ุจู

### ูุจู ูู ูุฒุงููุฉ ูู D1:

```bash
# 1. ุงููุญุต ุงูุณุฑูุน
python3 tools/audit_database.py

# 2. ุฅุฐุง ูุงูุช ุงููุชูุฌุฉ ุฌูุฏุฉุ ุงูุชูู ููุฎุทูุฉ ุงูุชุงููุฉ
# 3. ุฅุฐุง ูุงูุช ููุงู ูุดุงููุ ุดุบู ุงูุฅุญุตุงุฆูุงุช ุงูุชูุตูููุฉ
python3 tools/detailed_statistics.py

# 4. ุงูุญุต ุนููุงุช ูุนููุฉ ููุชุฃูุฏ
python3 tools/inspect_data_content.py

# 5. ุฅุฐุง ูุงูุช ูู ุงููุญูุตุงุช ุฌูุฏุฉุ ูู ุจุงููุฒุงููุฉ
./sync_master.sh
```

---

## ๐ ููู ุงููุฎุฑุฌุงุช

### ุฑููุฒ ุงูุญุงูุฉ:
- โ **ููุชุงุฒ**: ูุณุจุฉ ููุก โฅ 95%
- โ๏ธ **ุฌูุฏ**: ูุณุจุฉ ููุก 70-94%
- โ๏ธ **ูุชูุณุท**: ูุณุจุฉ ููุก 40-69%
- โ **ุถุนูู**: ูุณุจุฉ ููุก 1-39%
- โ **ูุงุฑุบ**: ูุณุจุฉ ููุก 0%

### ูุซุงู ุนูู ูุฎุฑุฌุงุช `detailed_statistics.py`:

```
๐ ุงูุชูุงุนูุงุช ุงูุฏูุงุฆูุฉ (drug_interactions)
================================================
๐ ุฅุฌูุงูู ุงูุตููู: 254,114

ุงูุนููุฏ                         ููุชูุฆ          ูุงุฑุบ     ุงููุณุจุฉ     ุงูุญุงูุฉ
--------------------------------------------------------------------------------
ingredient1                    254,114              0     100.0%  โ ููุชุงุฒ
ingredient2                    254,114              0     100.0%  โ ููุชุงุฒ
severity                       254,114              0     100.0%  โ ููุชุงุฒ
alternatives_a                 248,733          5,381      97.9%  โ ููุชุงุฒ
alternatives_b                 195,233         58,881      76.8%  โ๏ธ  ุฌูุฏ
metabolism_info                      0        254,114       0.0%  โ ูุงุฑุบ

๐ ูุณุจุฉ ุงูููุก ุงูุฅุฌูุงููุฉ ููุฌุฏูู: 89.5%
```

---

## โ๏ธ ูุชุทูุจุงุช ุงูุชุดุบูู

- **Python 3.7+**
- **SQLite3** (ูุฏูุฌ ูู Python)
- **ูุงุนุฏุฉ ุจูุงูุงุช:** `mediswitch.db` ูู ุงููุฌูุฏ ุงูุฑุฆูุณู

---

## ๐ง ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุฎุทุฃ: "Database file not found"
```bash
# ุชุฃูุฏ ูู ุฃูู ูู ุงููุฌูุฏ ุงูุตุญูุญ
cd /home/adminlotfy/project
python3 tools/audit_database.py
```

### ุฎุทุฃ: "Table does not exist"
```bash
# ุชุฃูุฏ ูู ุฃูู ุชุณุชุฎุฏู ุงูู schema ุงูุตุญูุญ (V16)
# ุฃุนุฏ ุจูุงุก ุงููุงุนุฏุฉ ุฅุฐุง ูุฒู ุงูุฃูุฑ:
python3 init_db_v16.py
python3 populate_mediswitch_final.py
```

---

## ๐ ููุงุญุธุงุช

1. **ุงูุฃุฏุงุก**: ุฌููุน ุงูุฃุฏูุงุช ุฎูููุฉ ูุณุฑูุนุฉุ ุญุชู ูุน ููุงุนุฏ ุจูุงูุงุช ูุจูุฑุฉ
2. **ุนุฏู ุงูุชุฏููุฑ**: ุงูุฃุฏูุงุช read-only ููุง ุชุนุฏู ุฃู ุจูุงูุงุช
3. **ุงูุฃูุงู**: ูููู ุชุดุบูููุง ูู ุฃู ููุช ุฏูู ูุฎุงุทุฑ

---

## ๐ ุงูุฏุนู

ุฅุฐุง ูุฌุฏุช ุฃู ูุดุงูู ุฃู ุชุญุชุงุฌ ูุฃุฏูุงุช ุฅุถุงููุฉุ ุฑุงุฌุน:
- `/home/adminlotfy/project/memory-bank/` ููุชูุซูู ุงููุงูู
- `populate_mediswitch_final.py` ูุฅุนุงุฏุฉ ุจูุงุก ุงูุจูุงูุงุช
- `sync_master.sh` ูููุฒุงููุฉ ุงูุขููุฉ
